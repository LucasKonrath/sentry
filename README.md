# PR Coverage Analyzer & Test Generator

A comprehensive tool that analyzes GitHub pull requests, evaluates test coverage, and automatically generates unit tests using LLM to improve code coverage.

## Features

- **Multi-Format Coverage Analysis**: Supports multiple coverage formats including:
  - pytest-cov and coverage.py (Python)
  - Cobertura XML (Java, C#, Python, JavaScript)
  - Istanbul JSON (JavaScript/TypeScript)
- **LLM-Powered Test Generation**: Uses OpenAI GPT-4 to generate intelligent unit tests
- **GitHub Integration**: Seamless PR creation and management
- **Configurable Thresholds**: Set custom coverage targets and quality standards
- **Docker Support**: Easy deployment with Docker and docker-compose
- **Webhook Server**: On-demand analysis triggered by GitHub webhooks

## Project Structure

```
├── src/
│   ├── analyzers/          # Coverage and code analysis modules
│   ├── generators/         # LLM-powered test generators
│   ├── github/            # GitHub API integration
│   ├── utils/             # Utility functions
│   └── main.py            # Main application entry point
├── tests/                 # Test suite
├── config/                # Configuration files
├── docs/                  # Documentation
└── requirements.txt       # Python dependencies
```

## Setup

1. Clone the repository
2. Install dependencies: `pip install -r requirements.txt`
3. Configure environment variables (see config/env.example)
4. Run the analyzer: `python src/main.py`

## Supported Coverage Formats

The system automatically detects and supports multiple coverage formats:

### Python
- **pytest-cov**: Generated by `pytest --cov`
- **coverage.py**: Standard Python coverage in JSON format

### Java
- **Cobertura XML**: Generated by Maven Surefire plugin or JaCoCo
- **JaCoCo XML**: Direct JaCoCo XML reports

### C# / .NET
- **Cobertura XML**: Generated by coverlet or dotnet test with Cobertura output

### JavaScript/TypeScript  
- **Cobertura XML**: Generated by Istanbul with Cobertura reporter
- **Istanbul JSON**: Native Istanbul/NYC coverage format (coming soon)

### Multi-Language Projects
The analyzer can handle repositories with multiple languages by detecting and parsing coverage reports in different formats simultaneously.

## Configuration

Set up your environment variables:
- `GITHUB_TOKEN`: GitHub Personal Access Token
- `OPENAI_API_KEY`: OpenAI API key for LLM test generation
- `COVERAGE_THRESHOLD`: Minimum coverage percentage target

## Usage

```python
from src.main import PRCoverageAnalyzer

analyzer = PRCoverageAnalyzer()
analyzer.analyze_pr(repo_url, pr_number)
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## License

MIT License
